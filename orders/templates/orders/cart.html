<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - e-xom store</title>
    <style>
        body { background: #ffe4ec; font-family: 'Segoe UI', Arial, sans-serif; margin: 0; }
        .navbar { background: #e91e63; padding: 1rem 0; text-align: center; }
        .navbar a { color: #fff; text-decoration: none; margin: 0 1rem; font-weight: bold; font-size: 1.1rem; }
        .navbar a:hover { text-decoration: underline; }
        .logo { font-size: 2.2rem; font-weight: bold; color: #fff; letter-spacing: 2px; }
        .container { max-width: 800px; margin: 40px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 16px #f8bbd0; padding: 2.5rem 2rem; }
        h1 { color: #e91e63; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 2rem; }
        th, td { padding: 0.8rem; text-align: center; }
        th { background: #f8bbd0; color: #ad1457; }
        tr:nth-child(even) { background: #fff0f6; }
        .product-img { width: 60px; height: 60px; object-fit: cover; border-radius: 6px; }
        .total-row td { font-weight: bold; color: #e91e63; font-size: 1.1rem; }
        .checkout-btn { background: #e91e63; color: #fff; border: none; padding: 0.8rem 2rem; border-radius: 6px; font-size: 1.1rem; cursor: pointer; margin-top: 2rem; display: block; margin-left: auto; margin-right: auto; }
        .checkout-btn:hover { background: #ad1457; }
        @media (max-width: 600px) {
            .container { padding: 1.2rem 0.5rem; }
            table, th, td { font-size: 0.95rem; }
            .product-img { width: 40px; height: 40px; }
        }
    </style>
</head>
<body>
    {% include 'core/navbar.html' %}
    <div class="container">
        <h1>Your Cart</h1>
        {% if items %}
        <table>
            <tr>
                <th>Image</th>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
            </tr>
            {% for item in items %}
            <tr>
                <td><img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="product-img"></td>
                <td>{{ item.product.name }}</td>
                <td>₹{{ item.product.price }}</td>
                <td>
                    <form method="post" action="{% url 'update_cart_item' item.id %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" style="width:50px; text-align:center;">
                        <button type="submit" style="background:#e91e63; color:#fff; border:none; border-radius:4px; padding:0.2rem 0.7rem; cursor:pointer;">Update</button>
                    </form>
                    <form method="post" action="{% url 'remove_from_cart' item.id %}" style="display:inline; margin-left:5px;">
                        {% csrf_token %}
                        <button type="submit" style="background:#fff; color:#e91e63; border:1px solid #e91e63; border-radius:4px; padding:0.2rem 0.7rem; cursor:pointer;">Remove</button>
                    </form>
                </td>
                <td>₹{{ item.subtotal|floatformat:2 }}</td>
            </tr>
            {% endfor %}
            <tr class="total-row">
                <td colspan="4">Total</td>
                <td>₹{{ total }}</td>
            </tr>
        </table>
        <form method="post" action="{% url 'checkout' %}" style="margin-top:2rem; text-align:center;">
            {% csrf_token %}
            <label style="font-weight:bold; color:#ad1457;">Payment Method:</label>
            <select name="payment_method" required style="margin:0 1rem; padding:0.4rem 1rem; border-radius:6px; border:1px solid #e91e63;">
                <option value="cash">Cash on Delivery</option>
            </select>
            <button type="submit" class="checkout-btn">Checkout</button>
        </form>
        {% else %}
        <p style="color:#ad1457; text-align:center;">Your cart is empty.</p>
        {% endif %}
    </div>
</body>
</html> 